<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ABCD² — Riesgo AIT</title>
<style>
  :root{
    --bg:#f8fafc; --ink:#0f172a; --muted:#64748b;
    --card:#ffffff; --ring:#c7dbff; --borde:#dbeafe;
    --ok:#166534; --ok-bg:#e9fce7; --ok-ring:#bbf7d0;
    --mid:#92400e; --mid-bg:#fff7ed; --mid-ring:#fed7aa;
    --bad:#991b1b; --bad-bg:#fef2f2; --bad-ring:#fecaca;
    --accent:#1e3a8a; --accent-soft:#e6f0ff;
  }
  *{box-sizing:border-box}
  html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);
            font-family:Verdana, Geneva, Tahoma, sans-serif;font-size:15px}

  /* App bar */
  .appbar{position:sticky;top:0;z-index:1000;background:rgba(255,255,255,.9);
    border-bottom:1px solid var(--borde);
    backdrop-filter:saturate(140%) blur(8px); -webkit-backdrop-filter:saturate(140%) blur(8px)}
  .appbar-inner{max-width:980px;margin:0 auto;display:flex;gap:10px;align-items:center;padding:10px 14px}
  .appbar h1{margin:0;font-size:22px;font-weight:800;color:#2563eb}
  .spacer{flex:1}
  .pill-top{display:inline-block;border-radius:999px;padding:6px 12px;font-weight:800;
    border:2px solid transparent;white-space:nowrap;max-width:80vw;overflow:hidden;text-overflow:ellipsis}
  .pill-ok   {background:var(--ok-bg);  color:var(--ok);  border-color:var(--ok-ring)}
  .pill-warn {background:var(--mid-bg); color:var(--mid); border-color:var(--mid-ring)}
  .pill-bad  {background:var(--bad-bg); color:var(--bad); border-color:var(--bad-ring)}

  /* Layout */
  .wrap{max-width:980px;margin:14px auto 40px;padding:0 14px}
  .sub{color:var(--muted);margin:2px 0 12px}
  .panel{background:#f3f7ff;border:1px solid var(--borde);border-radius:16px;padding:14px;
         box-shadow:0 8px 22px rgba(31,86,179,.06)}
  .grid{display:grid;grid-template-columns:1fr;gap:12px}
  @media(min-width:760px){ .grid{grid-template-columns:1fr 1fr} }

  label{display:block;font-weight:900;color:#0b1f44;margin:6px 0 6px}
  select{width:100%;padding:12px;border-radius:12px;border:2px solid #cfd8ea;background:#fff;font-size:14px}
  select:focus{outline:none;box-shadow:0 0 0 4px var(--accent-soft)}

  /* Result card */
  .card{margin-top:14px;background:#fff;border:1px solid var(--borde);
        border-radius:16px;padding:14px;box-shadow:0 8px 22px rgba(31,86,179,.07)}
  .kpi{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  @media(min-width:760px){ .kpi{grid-template-columns:1fr 1fr} }
  .kpi3{display:grid;grid-template-columns:1fr;gap:12px;margin-top:12px}
  @media(min-width:760px){ .kpi3{grid-template-columns:repeat(3,1fr)} }

  .box{border:1.5px dashed var(--ring);border-radius:14px;background:#f8fbff;padding:14px;text-align:center}
  .ttl{color:#334155;font-weight:800;margin:0 0 6px}
  .val{font-size:28px;font-weight:900;color:#0b2c5f}
  .mini{font-size:12px;color:var(--muted)}

  /* Risk color helpers on boxes */
  .ok   {background:var(--ok-bg);  border-color:var(--ok-ring)}
  .warn {background:var(--mid-bg); border-color:var(--mid-ring)}
  .bad  {background:var(--bad-bg); border-color:var(--bad-ring)}
  .ok .val{color:var(--ok)} .warn .val{color:var(--mid)} .bad .val{color:var(--bad)}

  /* No cortar palabras en cajas */
  .box, .box *{word-break:normal;overflow-wrap:normal;hyphens:none}
</style>
</head>
<body>

<header class="appbar">
  <div class="appbar-inner">
    <h1>ABCD² — Riesgo de ictus tras AIT</h1>
    <div class="spacer"></div>
    <output id="pillTop" class="pill-top" aria-live="polite" aria-atomic="true"></output>
  </div>
</header>

<main class="wrap">
  <p class="sub">Complete los campos; el resultado y el riesgo se actualizan automáticamente.</p>

  <section class="panel" aria-labelledby="param-title">
    <h2 id="param-title" style="margin:0 0 8px;color:#0b1f44">Parámetros</h2>

    <div class="grid">
      <div>
        <label for="a">Edad ≥ 60 años</label>
        <select id="a">
          <option value="0">No (0)</option>
          <option value="1">Sí (1)</option>
        </select>
      </div>

      <div>
        <label for="b">Tensión arterial inicial ≥ 140/90</label>
        <select id="b">
          <option value="0">No (0)</option>
          <option value="1">Sí (1)</option>
        </select>
      </div>

      <div>
        <label for="c">Clínica</label>
        <select id="c">
          <option value="0">Otro (0)</option>
          <option value="1">Debilidad unilateral ausente, habla alterada (1)</option>
          <option value="2">Debilidad unilateral (2)</option>
        </select>
      </div>

      <div>
        <label for="d">Duración</label>
        <select id="d">
          <option value="0">&lt; 10 min (0)</option>
          <option value="1">10–59 min (1)</option>
          <option value="2">≥ 60 min (2)</option>
        </select>
      </div>

      <div>
        <label for="di">Diabetes</label>
        <select id="di">
          <option value="0">No (0)</option>
          <option value="1">Sí (1)</option>
        </select>
      </div>
    </div>

    <!-- Resultados -->
    <div id="resultCard" class="card" role="region" aria-live="polite" aria-atomic="true">
      <!-- FILA 1: score + categoría -->
      <div class="kpi">
        <div class="box">
          <div class="ttl">Puntuación ABCD²</div>
          <div class="val" id="scoreVal">—</div>
          <div class="mini">Rango: 0–7</div>
        </div>
        <div class="box" id="boxCat">
          <div class="ttl">Riesgo</div>
          <div class="val" id="riskLabel">—</div>
          <div class="mini">Bajo 0–3 · Moderado 4–5 · Alto 6–7</div>
        </div>
      </div>

      <!-- FILA 2: riesgos a horizontes -->
      <div class="kpi3">
        <div class="box" id="risk2">
          <div class="ttl">Riesgo a 2 días</div>
          <div class="val" id="p2">—</div>
        </div>
        <div class="box" id="risk7">
          <div class="ttl">Riesgo a 7 días</div>
          <div class="val" id="p7">—</div>
        </div>
        <div class="box" id="risk90">
          <div class="ttl">Riesgo a 90 días</div>
          <div class="val" id="p90">—</div>
        </div>
      </div>
    </div>
  </section>
</main>

<script>
  // Constantes para que Blogger no convierta en entidades
  const SUP2 = '\u00B2';   // ²
  const EM   = '\u2014';   // —

  // Mapas de riesgo por categoría
  const RISK_MAP = {
    bajo:     {p2:'1,0 %', p7:'1,2 %', p90:'3,1 %'},
    moderado: {p2:'4,1 %', p7:'5,9 %', p90:'9,8 %'},
    alto:     {p2:'8,1 %', p7:'11,7 %', p90:'17,8 %'}
  };

  function clasePorCat(cat){
    if(cat==='Bajo') return 'ok';
    if(cat==='Moderado') return 'warn';
    return 'bad';
  }
  function clasePill(cat){
    if(cat==='Bajo') return 'pill-ok';
    if(cat==='Moderado') return 'pill-warn';
    return 'pill-bad';
  }

  function calc(){
    const v = id => Number(document.getElementById(id).value||0);
    const t = v('a') + v('b') + v('c') + v('d') + v('di');

    // Categoría
    let cat = 'Bajo';
    if(t>=4 && t<=5) cat='Moderado';
    if(t>=6) cat='Alto';

    // Pintar score y etiqueta
    document.getElementById('scoreVal').textContent = t;
    document.getElementById('riskLabel').textContent = cat;

    // Colorear recuadros
    const boxCat = document.getElementById('boxCat');
    boxCat.classList.remove('ok','warn','bad');
    boxCat.classList.add(clasePorCat(cat));

    // Riesgos por horizontes (colores iguales)
    const m = (cat==='Bajo')?RISK_MAP.bajo : (cat==='Moderado'?RISK_MAP.moderado:RISK_MAP.alto);
    document.getElementById('p2').textContent  = m.p2;
    document.getElementById('p7').textContent  = m.p7;
    document.getElementById('p90').textContent = m.p90;

    ['risk2','risk7','risk90'].forEach(id=>{
      const el=document.getElementById(id);
      el.classList.remove('ok','warn','bad');
      el.classList.add(clasePorCat(cat));
    });

    // Píldora superior (sin entidades)
    const pill = document.getElementById('pillTop');
    pill.className = 'pill-top ' + clasePill(cat);
    pill.textContent = `ABCD${SUP2} ${t} ${EM} ${cat}`;
  }

  // Auto-cálculo
  ['a','b','c','d','di'].forEach(id=>{
    document.getElementById(id).addEventListener('change', calc);
  });
  document.addEventListener('DOMContentLoaded', calc);
</script>
<footer style="
    text-align:center;
    margin-top:2rem;
    padding:1rem 0;
    border-top:1px solid #e5e7eb;
    background:#ffffff;">
    <a href="https://ictusmalaga.blogspot.com" target="_blank" rel="noopener noreferrer" style="text-decoration:none;">
      <img src="https://blogger.googleusercontent.com/img/a/AVvXsEjVtODA0IhiAdybWI1agwcBIpZHwqL23SOJppZYsCnyBvnH_l43stC9yvFgOyFq060DeenIQtmBzy84RrsExZFRYWPaSKgEr4KsrDt5oRMCoZFYwfBNBYMZfzIgBZrOWCBjBhbtNQ9iuJ_y2pIdshl1Npp5CwCfCKIfptidRKhIhcVxi0n66m8AYXU4o1Q=w800"
           alt="Unidad de Ictus Málaga"
           style="max-width:320px;height:auto;opacity:.95;transition:opacity .2s;">
    </a>
  </footer>
</body>
</html>