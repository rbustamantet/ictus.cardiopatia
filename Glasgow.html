<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="icon" type="image/png" href="https://rbustamantet.github.io/ictus.cardiopatia/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="https://rbustamantet.github.io/ictus.cardiopatia/favicon.svg" />
<link rel="shortcut icon" href="https://rbustamantet.github.io/ictus.cardiopatia/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="https://rbustamantet.github.io/ictus.cardiopatia/apple-touch-icon.png" />
<link rel="manifest" href="https://rbustamantet.github.io/ictus.cardiopatia/site.webmanifest" />
<title>Escala de Glasgow (GCS)</title>

<style>
  :root{
    --bg:#f8fafc; --card:#ffffff; --ink:#0f172a; --muted:#64748b;
    --accent:#2563eb; --accent-light:#dbeafe;
    --ok:#15803d; --warn:#d97706; --bad:#b91c1c;
  }
  *{box-sizing:border-box}
  html,body{
    margin:0; padding:0;
    background:var(--bg); color:var(--ink);
    font-family:Verdana, Geneva, sans-serif;
  }

  /* === Cabecera pegajosa === */
  .appbar{
    position:sticky; top:0; z-index:1000;
    background:rgba(255,255,255,0.9);
    border-bottom:1px solid var(--accent-light);
    backdrop-filter:saturate(140%) blur(8px);
    -webkit-backdrop-filter:saturate(140%) blur(8px);
    transition:box-shadow .15s, border-color .15s, background .15s;
  }
  .appbar.scrolled{box-shadow:0 8px 24px rgba(0,0,0,.08); border-color:#e2e8f0}
  .appbar-inner{max-width:980px; margin:0 auto; display:flex; align-items:center; gap:12px; padding:10px 16px}
  .appbar h1{margin:0; font-size:22px; line-height:1.2; color:var(--accent); font-weight:800}
  .spacer{flex:1}
  .pill-top{
    display:inline-block; max-width:60vw;
    padding:6px 10px; border-radius:999px;
    background:var(--accent-light); color:#1e3a8a;
    border:1px solid #bfdbfe;
    font-size:12px; font-weight:700; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
  }
  @media (min-width:640px){ .pill-top{ max-width:420px } }

  /* === Contenido === */
  .wrap{max-width:880px;margin:16px auto 48px;padding:0 16px}
  .card{
    background:var(--card); border:1px solid #e5e7eb;
    border-radius:16px; box-shadow:0 2px 10px rgba(15,23,42,.06);
    padding:18px; transition:box-shadow .2s;
  }
  .card:hover{box-shadow:0 4px 16px rgba(15,23,42,.1)}
  label{display:block;margin:8px 0 4px;font-weight:bold;color:var(--ink)}
  select{
    width:100%;padding:10px 12px;border:1px solid #cbd5e1;border-radius:10px;
    background:#fff;font-size:14px;cursor:pointer;
  }
  select:focus{outline:2px solid var(--accent-light)}
  .row{display:grid;grid-template-columns:1fr;gap:10px}
  @media (min-width:560px){ .row{ grid-template-columns:1fr 1fr 1fr } }

  .hr{height:1px;background:#e2e8f0;margin:14px 0}
  .scoreline{font-weight:600;font-size:16px;color:var(--ink)}
  .score{font-weight:800;color:var(--accent)}
  .pill{
    display:inline-block;padding:4px 10px;margin-left:8px;
    border-radius:999px;font-weight:700;color:#fff;
  }
  .pill.leve{background:var(--ok)}
  .pill.moderado{background:var(--warn)}
  .pill.grave{background:var(--bad)}
  .note{color:var(--muted);font-size:12px;margin-top:12px}

  footer.smallprint{
    text-align:center;margin-top:2rem;padding:1rem 0;
    border-top:1px solid #e5e7eb;background:#ffffff;
  }
  footer img{max-width:320px;height:auto;opacity:.95;transition:opacity .2s;}
  footer img:hover{opacity:1;}
</style>
</head>
<body>

<header class="appbar" role="region" aria-label="Cabecera GCS">
  <div class="appbar-inner">
    <h1>Escala de Glasgow (GCS)</h1>
    <div class="spacer"></div>
    <output id="pillTop" class="pill-top" aria-live="polite" aria-atomic="true">GCS: —</output>
  </div>
</header>

<div class="wrap">
  <div class="card" role="form" aria-labelledby="gcs-title">
    <div class="row">
      <div>
        <label for="e">Apertura ocular (E)</label>
        <select id="e" aria-label="Apertura ocular">
          <option value="4">4 – Espontánea</option>
          <option value="3">3 – A la voz</option>
          <option value="2">2 – Al dolor</option>
          <option value="1">1 – Ninguna</option>
        </select>
      </div>
      <div>
        <label for="v">Respuesta verbal (V)</label>
        <select id="v" aria-label="Respuesta verbal">
          <option value="5">5 – Orientado</option>
          <option value="4">4 – Confuso</option>
          <option value="3">3 – Palabras inapropiadas</option>
          <option value="2">2 – Sonidos incomprensibles</option>
          <option value="1">1 – Ninguna</option>
        </select>
      </div>
      <div>
        <label for="m">Respuesta motora (M)</label>
        <select id="m" aria-label="Respuesta motora">
          <option value="6">6 – Obedece órdenes</option>
          <option value="5">5 – Localiza dolor</option>
          <option value="4">4 – Retira ante dolor</option>
          <option value="3">3 – Flexión anormal</option>
          <option value="2">2 – Extensión</option>
          <option value="1">1 – Ninguna</option>
        </select>
      </div>
    </div>

    <div class="hr"></div>

    <div class="scoreline" id="resultado" aria-live="polite" aria-atomic="true">
      GCS: <span class="score" id="out">—</span>
      <span class="pill" id="band">—</span>
    </div>
    <p class="note">Interpretación: leve (13–15), moderado (9–12), grave (3–8).</p>
  </div>
</div>

<script>
  // Cabecera con sombra
  var appbar = document.querySelector('.appbar');
  function onScroll(){ if(!appbar) return; (window.scrollY>8)?appbar.classList.add('scrolled'):appbar.classList.remove('scrolled'); }
  document.addEventListener('scroll', onScroll, {passive:true}); onScroll();

  var SEP = ' \u2014 ', EN = '\u2013';

  function clasificar(t){
    if(t >= 13) return {label:'Leve', css:'leve', range:'13'+EN+'15'};
    if(t >= 9)  return {label:'Moderado', css:'moderado', range:'9'+EN+'12'};
    return {label:'Grave', css:'grave', range:'3'+EN+'8'};
  }

  function updateHeaderPill(t, label){
    var pill = document.getElementById('pillTop');
    if(!pill) return;
    pill.textContent = (typeof t !== 'number') ? 'GCS: —' : 'GCS: ' + t + SEP + label;
  }

  function calc(){
    var e = Number(document.getElementById('e').value);
    var v = Number(document.getElementById('v').value);
    var m = Number(document.getElementById('m').value);
    var t = e + v + m;
    var band = clasificar(t);

    var out = document.getElementById('out');
    var pill = document.getElementById('band');

    out.textContent  = t + ' (E' + e + ' V' + v + ' M' + m + ')';
    pill.textContent = band.label + ' (' + band.range + ')';
    pill.className = 'pill ' + band.css;

    updateHeaderPill(t, band.label);
  }

  function attachAuto(){
    ['e','v','m'].forEach(function(id){
      var s = document.getElementById(id);
      s.addEventListener('change', calc);
      s.addEventListener('input',  calc);
    });
  }

  if(document.readyState === 'loading'){
    document.addEventListener('DOMContentLoaded', function(){ attachAuto(); calc(); updateHeaderPill(); });
  }else{
    attachAuto(); calc(); updateHeaderPill();
  }
</script>

<footer class="smallprint">
  <a href="https://ictusmalaga.blogspot.com" target="_blank" rel="noopener noreferrer" style="text-decoration:none;">
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEjVtODA0IhiAdybWI1agwcBIpZHwqL23SOJppZYsCnyBvnH_l43stC9yvFgOyFq060DeenIQtmBzy84RrsExZFRYWPaSKgEr4KsrDt5oRMCoZFYwfBNBYMZfzIgBZrOWCBjBhbtNQ9iuJ_y2pIdshl1Npp5CwCfCKIfptidRKhIhcVxi0n66m8AYXU4o1Q=w800"
         alt="Unidad de Ictus Málaga">
  </a>
</footer>

</body>
</html>
