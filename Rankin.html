<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="icon" type="image/png" href="https://rbustamantet.github.io/ictus.cardiopatia/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="https://rbustamantet.github.io/ictus.cardiopatia/favicon.svg" />
<link rel="shortcut icon" href="https://rbustamantet.github.io/ictus.cardiopatia/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="https://rbustamantet.github.io/ictus.cardiopatia/apple-touch-icon.png" />
<link rel="manifest" href="https://rbustamantet.github.io/ictus.cardiopatia/site.webmanifest" />
<title>Escala de Rankin modificada</title>

<style>
  :root{
    --bg:#f0f6fc; --card:#ffffff; --ink:#0f172a; --muted:#64748b;
    --accent:#2563eb; --accent-light:#dbeafe;
  }
  *{box-sizing:border-box}
  body{margin:0;padding:0;font-family:Verdana, Geneva, sans-serif;background:var(--bg);color:var(--ink)}

  /* CABECERA pegajosa */
  .appbar{
    position:sticky; top:0; z-index:1000;
    background:rgba(255,255,255,.9);
    border-bottom:1px solid var(--accent-light);
    backdrop-filter:saturate(140%) blur(8px); -webkit-backdrop-filter:saturate(140%) blur(8px);
    transition:box-shadow .15s,border-color .15s
  }
  .appbar.scrolled{ box-shadow:0 8px 24px rgba(0,0,0,.08); border-color:#e2e8f0 }
  .appbar-inner{max-width:980px;margin:0 auto;display:flex;align-items:center;gap:12px;padding:10px 16px}
  .appbar h1{margin:0;font-size:22px;line-height:1.2;color:var(--accent);font-weight:800}
  .spacer{flex:1}

  .pill{
    display:inline-block; max-width:60vw;
    padding:6px 10px; border-radius:999px;
    background:var(--accent-light); color:#1e3a8a; border:1px solid #bfdbfe;
    font-size:12px; font-weight:700; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
  }
  @media (min-width:640px){ .pill{ max-width:420px } }

  /* === Contenido === */
  .wrap{max-width:980px;margin:16px auto;padding:0 16px}
  .card{background:var(--card);border:1px solid var(--accent-light);border-radius:16px;box-shadow:0 4px 16px rgba(0,0,0,.08);padding:16px;margin:12px 0}
  .hr{height:1px;background:#e2e8f0;margin:12px 0}
  .score{font-weight:800;color:var(--accent)}
  .note{color:var(--muted);font-size:12px}

  .options{display:grid;gap:10px}
  .option{display:flex;gap:12px;align-items:flex-start;border:1px solid #dbeafe;background:#fff;border-radius:12px;padding:12px;transition:box-shadow .15s, border-color .15s, background .15s; cursor:pointer}
  .option:hover{box-shadow:0 4px 14px rgba(37,99,235,.08)}
  .badge{min-width:36px;min-height:36px;border-radius:10px;background:#eef6ff;border:1px solid #dbeafe;color:#1e40af;font-weight:700;display:flex;align-items:center;justify-content:center}
  .opt-title{font-weight:700;margin:0 0 4px}
  .opt-desc{margin:0;color:#334155;font-size:14px;line-height:1.45}
  .opt-hints{margin:6px 0 0 0;color:#475569;font-size:12px}
  .opt-hints li{margin:2px 0}

  /* Radios visualmente ocultos (accesibles) */
  .radio{
    position:absolute !important;
    width:1px; height:1px; padding:0; margin:-1px;
    overflow:hidden; clip:rect(0,0,0,0); clip-path: inset(50%);
    white-space:nowrap; border:0;
  }
  /* Estado seleccionado */
  .radio:checked + label.option{
    border-color:#60a5fa; background:#f8fbff;
    box-shadow:0 0 0 3px rgba(37,99,235,.15) inset;
  }
  /* Foco accesible */
  .radio:focus-visible + label.option{
    outline:3px solid #93c5fd;
    outline-offset:2px;
  }
.pill.tone-green{background:#dcfce7;color:#166534;border-color:#bbf7d0;}
.pill.tone-amber{background:#fef9c3;color:#92400e;border-color:#fde68a;}
.pill.tone-red{background:#fee2e2;color:#991b1b;border-color:#fecaca;}
html{ scroll-behavior:auto; }
body {
  overflow-x: hidden;
}
</style>
</head>
<body>

<!-- CABECERA -->
<header class="appbar" role="region" aria-label="Cabecera mRS">
  <div class="appbar-inner">
    <h1>Escala de Rankin modificada</h1>
    <div class="spacer"></div>
    <output id="pill" class="pill" aria-live="polite" aria-atomic="true">mRS: —</output>
  </div>
</header>

<div class="wrap">
  <div class="card">
    <p id="ayuda" class="note">Seleccione el grado que describa el estado <em>habitual</em> del paciente. Priorice la capacidad real en la vida diaria.</p>

    <fieldset aria-describedby="ayuda" style="border:0; padding:0; margin:0">
      <legend class="note" style="font-weight:700; margin-bottom:8px">Escala mRS (0–6)</legend>

      <div class="options" role="radiogroup" aria-label="Escala de Rankin modificada">
        <input class="radio" type="radio" id="mrs0" name="mrs" value="0">
        <label class="option" for="mrs0">
          <div class="badge">0</div>
          <div>
            <p class="opt-title">Sin síntomas</p>
            <p class="opt-desc">Sin signos o síntomas residuales; vida previa sin limitaciones atribuibles al evento.</p>
            <ul class="opt-hints"><li>Reincorporación completa a trabajo/actividades previas.</li></ul>
          </div>
        </label>

        <input class="radio" type="radio" id="mrs1" name="mrs" value="1">
        <label class="option" for="mrs1">
          <div class="badge">1</div>
          <div>
            <p class="opt-title">Síntomas sin discapacidad significativa</p>
            <p class="opt-desc">Síntomas leves pero puede realizar <strong>todas</strong> sus tareas habituales sin ayuda.</p>
            <ul class="opt-hints"><li>Difiere de 2: aquí no hay limitación funcional relevante.</li></ul>
          </div>
        </label>

        <input class="radio" type="radio" id="mrs2" name="mrs" value="2">
        <label class="option" for="mrs2">
          <div class="badge">2</div>
          <div>
            <p class="opt-title">Discapacidad leve</p>
            <p class="opt-desc">No puede realizar <strong>todas</strong> las actividades previas, pero es independiente para autocuidado.</p>
            <ul class="opt-hints">
              <li>Independiente en aseo, vestido, alimentación y continencia.</li>
              <li>Difiere de 3: no precisa ayuda física en AVD básicas.</li>
            </ul>
          </div>
        </label>

        <input class="radio" type="radio" id="mrs3" name="mrs" value="3">
        <label class="option" for="mrs3">
          <div class="badge">3</div>
          <div>
            <p class="opt-title">Discapacidad moderada</p>
            <p class="opt-desc">Requiere <strong>alguna ayuda</strong> pero <strong>camina sin ayuda</strong> (bastón/andador permitido).</p>
            <ul class="opt-hints">
              <li>Puede necesitar ayuda en tareas domésticas o parte de AVD.</li>
              <li>Difiere de 4: en 3 camina sin asistencia humana.</li>
            </ul>
          </div>
        </label>

        <input class="radio" type="radio" id="mrs4" name="mrs" value="4">
        <label class="option" for="mrs4">
          <div class="badge">4</div>
          <div>
            <p class="opt-title">Discapacidad moderada–severa</p>
            <p class="opt-desc"><strong>No camina sin ayuda</strong> y <strong>no atiende</strong> sus necesidades corporales sin asistencia.</p>
            <ul class="opt-hints"><li>Requiere ayuda para deambulación y AVD básicas.</li></ul>
          </div>
        </label>

        <input class="radio" type="radio" id="mrs5" name="mrs" value="5">
        <label class="option" for="mrs5">
          <div class="badge">5</div>
          <div>
            <p class="opt-title">Discapacidad severa</p>
            <p class="opt-desc"><strong>Encamado</strong>, <strong>incontinente</strong> y requiere <strong>cuidados continuos</strong>.</p>
            <ul class="opt-hints"><li>Totalmente dependiente para todas las AVD.</li></ul>
          </div>
        </label>

        <input class="radio" type="radio" id="mrs6" name="mrs" value="6">
        <label class="option" for="mrs6">
          <div class="badge">6</div>
          <div>
            <p class="opt-title">Fallecido</p>
            <p class="opt-desc">Muerte.</p>
          </div>
        </label>
      </div>
    </fieldset>

    
  </div>
</div>

<script>
  // Separador seguro (em dash)
  var SEP = ' \u2014 ';

  // Respeta preferencias de movimiento (con guardas)
  var prefersReducedMotion = false;
  try{
    prefersReducedMotion = (window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches) || false;
  }catch(e){}

  // Sombrado de cabecera al hacer scroll
  var appbar = document.querySelector('.appbar');
  function onScroll(){
    if(!appbar) return;
    if (window.scrollY > 8) { appbar.classList.add('scrolled'); }
    else { appbar.classList.remove('scrolled'); }
  }
  document.addEventListener('scroll', onScroll, {passive:true});
  onScroll();

  function normalizeEntities(s){
    s = (s == null) ? '' : String(s);
    return s.replace(/&mdash;|&#8212;|&ndash;|&#8211;/g, '\u2014');
  }
function toneForMRS(val){
  val = Number(val);
  if (val <= 1) return 'tone-green';
  if (val <= 3) return 'tone-amber';
  return 'tone-red';
}

  function updateHeaderPill(payload){
  var pill = document.getElementById('pill');
  if(!pill) return;

  pill.className = 'pill'; // limpia clases previas
  if(!payload){
    pill.textContent = 'mRS: —';
    return;
  }

  pill.textContent = 'mRS: ' + payload.val + SEP + payload.title;
  pill.classList.add(toneForMRS(payload.val));
}


  function calc(){
    var sel = document.querySelector('input[name="mrs"]:checked');
    var out = document.getElementById('out');
    var outText = document.getElementById('outText');

    if(!sel){
      if(out) out.textContent = '—';
      if(outText) outText.textContent = ' Seleccione un grado.';
      updateHeaderPill(null);
      return;
    }

    var val = sel.value;
    var next = sel.nextElementSibling;
    var titleEl = next ? next.querySelector('.opt-title') : null;
    var titleRaw = titleEl ? titleEl.textContent : '';
    var title = normalizeEntities(titleRaw);

    if(out) out.textContent = val;
    if(outText) outText.textContent = SEP + title;
    updateHeaderPill({ val: val, title: title });
  }

  function goResultado(){
  calc(); // sin desplazamiento
}


  // Listeners robustos (sin forEach, añade también 'click' por compatibilidad)
  function attachHandlers(){
    var radios = document.querySelectorAll('input[name="mrs"]');
    for (var i=0; i<radios.length; i++){
      radios[i].addEventListener('change', goResultado);
      radios[i].addEventListener('click', goResultado);
    }
    // Delegación extra por si algún WebView no propaga bien 'change'
    var container = document.querySelector('.options');
    if(container){
container.addEventListener('click', function(e){
  e.preventDefault(); // evita salto o reenfoque
        var label = e.target && e.target.closest ? e.target.closest('label.option') : null;
        if(label){
          var id = label.getAttribute('for');
          if(id){
            var inp = document.getElementById(id);
            if(inp && !inp.checked){ inp.checked = true; goResultado(); }
          }
        }
      });
    }
  }

  // Inicia
  if(document.readyState === 'loading'){
    document.addEventListener('DOMContentLoaded', function(){
      attachHandlers();
      updateHeaderPill(null); // mRS: —
    });
  }else{
    attachHandlers();
    updateHeaderPill(null);
  }
</script>
<footer style="
    position:relative;
    left:50%;
    transform:translateX(-50%);
    width:100vw;
    margin:2rem 0 0 0;
    padding:1.5rem 0;
    border-top:1px solid #e5e7eb;
    background:#ffffff;
    text-align:center;
    box-shadow:0 -2px 6px rgba(0,0,0,0.04);
">
  <a href="https://ictusmalaga.blogspot.com" target="_blank" rel="noopener noreferrer"
     style="text-decoration:none;display:inline-block;">
    <img src="https://blogger.googleusercontent.com/img/a/AVvXsEjVtODA0IhiAdybWI1agwcBIpZHwqL23SOJppZYsCnyBvnH_l43stC9yvFgOyFq060DeenIQtmBzy84RrsExZFRYWPaSKgEr4KsrDt5oRMCoZFYwfBNBYMZfzIgBZrOWCBjBhbtNQ9iuJ_y2pIdshl1Npp5CwCfCKIfptidRKhIhcVxi0n66m8AYXU4o1Q=w800"
         alt="Unidad de Ictus Málaga"
         style="max-width:380px;height:auto;opacity:.96;transition:opacity .2s;">
  </a>
</footer>
</body>
</html>
